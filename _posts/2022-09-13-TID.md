---
title: 코어 자바스크립트 | 1. 데이터의 가변성과 불변성
categories: [코어 자바스크립트]
tags: [Javascript, 개발 서적]
---

# 0. 자바스크립트의 데이터 유형

JS의 데이터 타입은 2 가지가 있다.
- primitive (=원시형, 기본형) 
  - number, string, boolean, null, undefined 
- reference (=참조형, 객체형)
  - object, array, function ...

원시형과 참조형은 **불변성과 가변성** 측면에서 차이점이 있다. 
이러한 차이점은 원시형과 참조형 변수를 구분하는 기준이 되기도 한다. 

값을 복사한다고 가정해보면

  - 원시형은 데이터 값의 주소를 복사한다
  - 참조형은 객체의 속성들을 가리키는 주소값을 복사한다. 

원시형과 참조형이 이렇게 다른 방식으로 값을 복사하는 이유는 자바스크립트가 원시형과 참조형 데이터를 어떻게 할당하는지 알아 볼 필요가 있다. 

# 1. 자바스크립트의 데이터 할당 

```Javascript
var name = 'jane'
name = name + 'doe'
```
name이라는 원시형 변수를 선언과 동시에 'jane'으로 할당하는 코드다. 이를 자바스크립트의 메모리 관점에서 본다면, 아래와 같다.

![jsmemory-primitive](https://user-images.githubusercontent.com/20367043/192150220-4a1be289-3fa7-4726-ac67-45d072356a7e.png)

> 자바스크립트 메모리는 변수 영역 / 데이터 영역으로 나뉜다.

name이라는 변수는 'jane'이라는 문자열이 저장된 메모리 주소의 주소값을 가지고 있다. 
그리고 name변수에 'doe'문자열을 이어붙여서 name에 새로 할당한다. 이를 메모리 관점에서 보면, 

![jsmemoryprimitive2](https://user-images.githubusercontent.com/20367043/192150495-08f861f0-c036-4e98-8ca5-1eaa8d060dfc.png)

- **기존의 100 주소에 있던 데이터('jane')가 새로운 이어붙인 데이터('jane doe')로 바뀌는 것이 아니라**, 
- 새로운 데이터 영역을 할당받고 그 주소값으로 변경된다. 
- 원시형 타입이 불변하다고 하는 이유가 여기 있다. 한 번 할당된 데이터 영역의 데이터는 GC가 수거해가지 않는 이상 바뀌지 않는다. 새로운 데이터가 생기고 할당될 뿐이다. 

그렇다면 참조형 데이터의 데이터 할당은 어떨까. 

```Javascript
var person = {
    age: 25, 
    gender: 'female'
}
```
![jsmemory-reference](https://user-images.githubusercontent.com/20367043/192150984-92fa7cd6-b9d7-4bac-a2c6-f4e81484d2b4.png)

- 참조형은 각 객체마다 별도의 변수 영역을 갖는다는 것이 특징이다. 각 속성의 값은 같은 데이터 영역을 사용한다. 
- person 변수에는 해당 객체의 속성들을 가리키고 있는 주소값(100)이 할당된다. 
- 데이터 영역의 100번지 주소는 person 객체의 속성의 주소값을 데이터값으로 가지고 있다. 
  
결과적으로 변수가 변수에 저장된 값에 도달하기까지 원시형 변수는 다리가 1 개, 참조형 변수는 다리가 2개 놓여져 있다고 비유할 수 있다.

- 원시형 변수는 변수에 저장된 주소 값으로 가면 바로 데이터가 있지만 ( 1단계 )
- 참조형 변수는 변수에 저장된 주소 값으로 가면 ( 1단계 ) 바로 객체의 속성들의 데이터 값이 있는 것이 아니라, 또 다른 주소값이 저장되어 있고, 그 주소값으로 가면 ( 2단계 ) 비로소 객체의 속성들의 값을 가리키는 주소값이 저장되어 있다. 



