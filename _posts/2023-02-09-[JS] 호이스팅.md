---
title: JS | 호이스팅 개념과 변수, 함수 선언
categories: [JS]
tags: [JS, Javascript, var, let, const, function]
---

## 기존의 변수 선언 방식 <kbd>var</kbd>

자바스크립트 환경에서 변수를 선언하는 전통적인 키워드는 `var` 이다. 그러나 이 녀석 `var`를 아무 생각 없이, 막연하게 사용하다보면 내 의도와는 다르게 동작하는 경우가 있다. 

### var의 한계점

1. 유효 범위 scoping
    
    기본적으로 `var` 키워드로 선언된 변수는 **함수 레벨 스코프**이다. 자바스크립트에서는 함수 레벨 스코프 (function scoping)와 블록 레벨 스코프 (block scoping)로 나뉜다. 
    - 함수 레벨 스코프 : 변수에 접근할 수 있는 범위가 변수가 선언된 함수로 한정된다. 
    - 블록 레벨 스코프 : 변수에 접근할 수 있는 범위가 `{}` 블록 내부로 한정된다. 

    ```javascript
    // function scoping
    run = function() {
     if (true) {
        var bar = 'bar'
     }
     console.log(bar)
    }
    run() // 'bar' 
    ```
    `var`은 if 블록이 아닌 함수 내부 전체 에서 접근가능하기 때문에 if 블록이 종료되어도 접근할 수 있다. 따라서 'bar' 출력. 

     ```javascript
    // block scoping
    run = function() {
     if (true) {
        let bar = 'bar'
     }
     console.log(bar)
    }
    run() // ReferenceError: bar is not defined
    ```
    `let`은 블록 레벨 스코프이기 때문에 if블록 내에서만 유효하다. 따라서 if문 종료후에는 접근할 수 없으므로 에러가 발생한다. 

    `var`는 함수 레벨 스코프이기 때문에 **블록 내부의 변수가 블록 외부에까지 영향을 미칠 수 있다는 점**을 알아야 한다. 이는 코드의 추적을 방해하고, 예측하지 못한 결과를 만들 수도 있다. 모든 변수이름을 다 머리 속에 저장하고 코드를 작성하지 않으므로 충분히 중복된 변수명을 사용할 수 있다. 


2. 호이스팅 hoisting  

    `var`로 선언된 변수는 **호이스팅의 대상**이된다. 호이스팅은 코드의 실행 전에, 변수의 선언 관련 정보를 미리 수집하여 실행 전에 변수에 접근할 수 있도록 하는 과정이다. MDN에서는 '인터프리터가 변수와 함수의 메모리 공간을 선언 전에 미리 할당하는 것을 의미'라고 설명하고 있다. 

    보통 호이스팅 관련한 글들을 보면 `변수의 선언부를 끌어올린다`는 표현을 많이 쓴다. 아마 `hoist` 라는 단어의 뜻 때문인 것 같다. 무언가를 끌어올린다는 사전적 의미를 갖고 있다.
    
    > hoist : (noun) an act of raising or lifting something.

    코드는 순차적이기 때문에 위/아래가 존재한다. 컴파일러/인터프리터는 위에서부터 아래로 순차적으로 코드를 해석한다. 따라서 이미지상으로 하단의(즉, 미래의) 변수들을 상단으로(현재) 끌어올린다는 그림이 이상하지가 않는 것이다. 

    ```javascript  
    run = function() {
        console.log(foo)
        var foo = 'foo' // 데이터 선언과 할당이 동시에 이루어진 코드.
    }
    run() // 'undefined'
    ```
    `foo` 를 선언하기 이전에 콘솔에 찍어보면 undefined를 출력한다. 컴파일러가 코드를 실행하기 전에, 변수의 선언 정보들만 미리 스캔한다. `var foo = 'foo'` 이 부분에서 **선언부분만 수집**하게 되어, `foo` 변수를 메모리에 할당하고 문자열 'foo'를 할당하는 부분은 무시하고 디폴트값인 `undefined`를 할당한다. 

    ```javascript
    run = function() {
        var foo; // 선언 후 undefined로 자동 할당
        console.log(foo) // undefined 출력
        foo = 'foo' // 값 할당
    }
    ```
    컴파일러가 동작하는 과정을 코드의 순차적인 흐름으로 표현해보자면 위와 같은 순서로 실행된다고 보면 된다. 그러면, 컴파일러가 직접 코드의 순서를 바꾸기 때문에 호이스팅이 발생하는 것일까?



## 추가된 변수 선언 방식 let, const



### TDZ


