<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="JS에서 안전하게 널값 처리하기 Optional chaining(?.) &amp; Nullish coalescing operator (??)" /><meta property="og:locale" content="en" /><meta name="description" content="JS에서 널값 안전하게 유연하게 처리하기" /><meta property="og:description" content="JS에서 널값 안전하게 유연하게 처리하기" /><link rel="canonical" href="https://su-ram.github.io/posts/JS-optional-chaining-&-nullish-coalescing-operator/" /><meta property="og:url" content="https://su-ram.github.io/posts/JS-optional-chaining-&-nullish-coalescing-operator/" /><meta property="og:site_name" content="수람" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-13T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="JS에서 안전하게 널값 처리하기 Optional chaining(?.) &amp; Nullish coalescing operator (??)" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-01-29T23:40:20+09:00","datePublished":"2023-01-13T00:00:00+09:00","description":"JS에서 널값 안전하게 유연하게 처리하기","headline":"JS에서 안전하게 널값 처리하기 Optional chaining(?.) &amp; Nullish coalescing operator (??)","mainEntityOfPage":{"@type":"WebPage","@id":"https://su-ram.github.io/posts/JS-optional-chaining-&-nullish-coalescing-operator/"},"url":"https://su-ram.github.io/posts/JS-optional-chaining-&-nullish-coalescing-operator/"}</script><title>JS에서 안전하게 널값 처리하기 Optional chaining(?.) & Nullish coalescing operator (??) | 수람</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="수람"><meta name="application-name" content="수람"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://user-images.githubusercontent.com/20367043/152596024-2ecc856c-2fb3-45fc-ac0f-4ce137eead05.gif " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">수람</a></div><div class="site-subtitle font-italic">dev study blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/su-ram" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['swamys','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>JS에서 안전하게 널값 처리하기 Optional chaining(?.) & Nullish coalescing operator (??)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>JS에서 안전하게 널값 처리하기 Optional chaining(?.) & Nullish coalescing operator (??)</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/su-ram">suram kim</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1673535600" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2023-01-13 </em> </span> <span> Updated <em class="timeago" data-ts="1675003220" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2023-01-29 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2143 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><h2 id="js에서-널값-안전하게-유연하게-처리하기"><span class="mr-2">JS에서 널값 안전하게 유연하게 처리하기</span><a href="#js에서-널값-안전하게-유연하게-처리하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="table-wrapper"><table><tbody><tr><td>Uncaught TypeError: Cannot read properties of undefined (reading ‘xxx’)</table></div><p>위의 에러는 undefined인 객체의 xxx 속성에 접근하려고 할 때 쉽게 만날 수 있는 에러이다. 이런 에러를 만나게 되면 대부분 이전 단계에서 조건문을 통해 undefined인지 체크를 하고 undefined 가 아님을 보장한 상태에서 내부의 속성값을 접근하도록 해주었다. 그러나 <code class="language-plaintext highlighter-rouge">?.</code>, <code class="language-plaintext highlighter-rouge">??</code> 연산자를 사용하면 내가 직접 체크를할 필요 없이 좀 더 편하고 유연하게 처리할 수 있다.</p><p>얼마 전에 프로젝트 소스코드를 보다가 처음 보는 자바스크립트 코드를 보게되었다. 삼항연산자 같기도 하고, <code class="language-plaintext highlighter-rouge">.</code>을 이어 붙여서 속성에 접근하는 것 같기도 하고.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">return</span> <span class="nx">xxxList</span><span class="p">?.</span><span class="nx">ooProperty</span><span class="p">?.</span><span class="nx">xxProperty</span> <span class="p">??</span> <span class="nx">defaultValue</span>
</pre></table></code></div></div><p>찾아보니 <code class="language-plaintext highlighter-rouge">?.</code>연산자는 Optional Chaining, <code class="language-plaintext highlighter-rouge">??</code> 연산자는 Nullish coalescing operator 라고 한다. ES2020 표준으로 나름 최신 문법이다.</p><p>이 두 가지 연산자는 모두 객체의 널값과 관련이 있다. 접근하고자 하는 값이 nullish한 경우 undefined 에러를 뱉지 않고 분기처리할 수 있도록 도와준다. 따라서 해당 속성값을 참조하기 이전에 조건문 등으로 해당 값이 존재하는지 여부를 판단하는 코드를 추가할 필요 없이 속성에 접근하는 연산자만 사용하면 된다.</p><h2 id="optional-chaining---"><span class="mr-2">Optional Chaining &lt; ?. &gt;</span><a href="#optional-chaining---" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>직독직해하면 선택적 체이닝. 선택적의 대상은 접근하고자하는 값이 nullish한지 여부다. ( nullish = null 또는 undefined.) nullish 여부에 따라 체이닝을 이어나가기도, 멈추기도할 수 있다. 문법은 <code class="language-plaintext highlighter-rouge">.</code> 접근 연산자 앞에 <code class="language-plaintext highlighter-rouge">?</code> 을 붙이면된다. <code class="language-plaintext highlighter-rouge">?.</code> 연산자를 적용할 수 있는 대상은 객체의 속성값, 표현식, 함수호출 3가지이다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nx">obj</span><span class="p">.</span><span class="nx">val</span><span class="p">?.</span><span class="nx">prop</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">val</span><span class="p">?.[</span><span class="nx">expr</span><span class="p">]</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">func</span><span class="p">?.(</span><span class="nx">args</span><span class="p">)</span>

</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">?</code> <strong>앞의 속성에 대해서 nullish 여부를 체크한다.</strong> (즉, obj.val에 대해서)</p><ul><li>nullish 하지 않다면 체이닝을 이어나간다.<li>nullish 하다면 undefined를 리턴하고 체이닝을 이어가지 않고 종료한다.</ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">car</span> <span class="o">=</span> <span class="p">{</span> 
    <span class="na">power</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span> 
    <span class="na">engine</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">aaa</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> 
        <span class="na">bbb</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> 
        <span class="na">ccc</span><span class="p">:</span> <span class="p">{</span>
            <span class="p">...</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">car</span><span class="p">.</span><span class="nx">engine</span><span class="p">.</span><span class="nx">ddd</span><span class="p">.</span><span class="nx">prop</span> <span class="c1">// #1. Uncaught TypeError: Cannot read properties of undefined (reading 'prop') </span>
<span class="nx">car</span><span class="p">.</span><span class="nx">engine</span><span class="p">.</span><span class="nx">ddd</span><span class="p">?.</span><span class="nx">prop</span> <span class="c1">// #2. return undefined</span>
</pre></table></code></div></div><p>그리고 무엇보다도 nullish한 경우 <strong>type error를 내뱉지 않고</strong> 널값 처리를 할 수 있어 안전하게 널값을 처리할 수 있다는 장점이 있다.</p><ol><li><code class="language-plaintext highlighter-rouge">ddd</code> 속성이 nullish 하기 때문에 prop에 접근할 수 없어서 TypeError<li><code class="language-plaintext highlighter-rouge">ddd?.</code> 옵셔널 체이닝 연산자를 이용하여 <code class="language-plaintext highlighter-rouge">ddd</code>가 nullish인지 체크하고 undefined 반환하고 에러 없이 종료.</ol><p><code class="language-plaintext highlighter-rouge">?</code>가 붙어있는 속성값에 대해서만 체크를 하기 때문에, <code class="language-plaintext highlighter-rouge">car.engine?.ddd.prop</code> 으로 접근해도 #1과 같은 에러가 난다. 따라서 <code class="language-plaintext highlighter-rouge">?</code>을 잘 붙여서 사용해야 한다.</p><p>코드를 작성하는 사람은 데이터 구조를 알고 있기 때문에 당연히 값이 있다고 생각하고 또는 그럴거라고 짐작하고 <code class="language-plaintext highlighter-rouge">.</code> 연산자로 이어붙여 해당 값에 접근하게 된다. 막상 런타임에서 수많은 값의 변경이 연쇄적으로, 동시다발적으로 일어나게 되면 어느 순간은 null 이나 undefined로 참조되는 경우가 많다. 그렇게 되면 내가 작성한 코드는 TypeError를 내뿜게 되는 것이다.</p><p>보통 중첩된 정도가 깊지 않은 경우에는 앞서 해당 속성값이 존재하는지 여부를 조건문을 통해 별도로 체크해주게 된다. 그러나 optional chaining 연산자는 별도로 체크해주는 과정을 대신 해준다.</p><h2 id="실전-적용-vue-컴포넌트에서-사용해보기"><span class="mr-2">(실전 적용) Vue 컴포넌트에서 사용해보기</span><a href="#실전-적용-vue-컴포넌트에서-사용해보기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>뷰 컴포넌트의 template 코드 안에서도 이 문법이 적용될까? 사실 이 부분이 제일 궁금했다. 중첩된 객체를 특정 컴포넌트의 props로 넘겨주는 경우가 그렇다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">MyComponent</span>
        <span class="p">:</span><span class="nx">data</span><span class="o">=</span><span class="dl">"</span><span class="s2">myData.files.itemList</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/MyComponent</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span></pre></table></code></div></div><p>위의 코드에서 만약 files가 undefined라면 콘솔에 TypeError가 날 것이다. (실제로 개발하면서 엄청 많이 겪었다.) 이런 경우에 대비해서 나는 주로 v-if / v-show 디렉티브를 사용했다. 중첩된 속성 접근 전에 항상 이런 방어적인 코드를 추가하다보니 번거롭다는 생각을 하기도 했고, 실수로 누락되는 부분이 생기기 마련이었다. 그래서 옵셔널 체이닝 문법을 사용하면 사전의 v-if / v-show 를 쓰지 않아도 될 것 같아서 실험을 해보았는데 아직 template 내에서 옵셔널 체이닝 문법을 사용하지는 못한다. 물론 vue2 기준이다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">MyComponent</span>
        <span class="p">:</span><span class="nx">data</span><span class="o">=</span><span class="dl">"</span><span class="s2">myData.files?.itemList</span><span class="dl">"</span><span class="o">&gt;</span> <span class="c1">// error 뷰가 이해하지 못한다.</span>
    <span class="o">&lt;</span><span class="sr">/MyComponent</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span></pre></table></code></div></div><p>물론, script 태그 내에서는 옵셔널 체이닝 문법 사용이 가능하다.</p><h2 id="nullish-coalescing-operator---"><span class="mr-2">Nullish coalescing operator &lt; ?? &gt;</span><a href="#nullish-coalescing-operator---" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">return</span> <span class="nx">xxxList</span><span class="p">?.</span><span class="nx">ooProperty</span><span class="p">?.</span><span class="nx">xxProperty</span> <span class="p">??</span> <span class="nx">defaultValue</span>
</pre></table></code></div></div><p>아까 위에 코드를 다시 보면, <code class="language-plaintext highlighter-rouge">??</code> 연산자도 보인다. 딱봐도 삼항연산자 비스무리하게 생겨서 짐작하기 쉬웠다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c1">//문법</span>
<span class="nx">leftExpr</span> <span class="p">??</span> <span class="nx">rightExpr</span>

<span class="c1">//예시 </span>
<span class="kd">const</span> <span class="nx">aaa</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">??</span> <span class="dl">'</span><span class="s1">default value</span><span class="dl">'</span> <span class="c1">// 'default value'</span>
<span class="kd">const</span> <span class="nx">bbb</span> <span class="o">=</span> <span class="nx">isEmpty</span><span class="p">()</span> <span class="p">??</span> <span class="kc">false</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">??</code> 연산자는 <strong>논리 연산자</strong>다. <code class="language-plaintext highlighter-rouge">??</code> 기준으로 앞선 왼쪽 논리식이 null 또는 undefined 라면 오른쪽 값을 반환하고 true하다면 왼쪽 값을 반환하는 연산자이다. 여기서 true로 판단하는 기준은 해당 값이 falsy한지 여부다. (false, ‘’, “”, 0, NaN 모두 falsy한 값이므로 true가 된다.)</p><p>MDN 문서에서는 OR 논리 연산자의 특별한 케이스라고 설명하고 있다. <code class="language-plaintext highlighter-rouge">??</code> 와 <code class="language-plaintext highlighter-rouge">||</code> 연산자의 차이점은 false 판단 기준이다.</p><h3 id="거짓-판단-기준"><span class="mr-2">거짓 판단 기준</span><a href="#거짓-판단-기준" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><code class="language-plaintext highlighter-rouge">??</code></p><ul><li>오직 null, undefined 값만 false로 판단한다. 빈 문자열, 0, NaN도 값으로 인정하여 true로 판단한다.</ul><p><code class="language-plaintext highlighter-rouge">||</code></p><ul><li>null, undefined, ‘’, “”, 0, Nan 등 자바스크립트에서 <strong>falsy</strong> 하다고 여겨지는 것들을 모두 false로 처리한다.</ul><p>빈 문자열, 0 도 자바스크립트 엔진이 거짓값스럽다?라고 해석하는 걸 볼 수 있다. 이걸 영어로 falsy 하다고 한다. 나도 이번에 처음 알았다. 실제로 코드로 실험해보면 다른 결과가 나오는 걸 볼 수 있다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nx">숫자</span> <span class="mi">0</span> 

<span class="mi">0</span> <span class="p">??</span> <span class="dl">'</span><span class="s1">default value</span><span class="dl">'</span> <span class="c1">// return 0</span>
<span class="mi">0</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">default value</span><span class="dl">'</span> <span class="c1">//return 'default value'</span>

<span class="nx">빈</span> <span class="nx">문자열</span>

<span class="dl">''</span> <span class="p">??</span> <span class="dl">'</span><span class="s1">default value</span><span class="dl">'</span> <span class="c1">// return ''</span>
<span class="dl">''</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">default value</span><span class="dl">'</span> <span class="c1">// return 'default value'</span>

</pre></table></code></div></div><p>falsy한 값들도 고유한 값으로 인정하여 true하도록 하고 싶다면 <code class="language-plaintext highlighter-rouge">??</code> 연산자를 사용하면 된다. 주로 변수의 디폴트 값을 할당할 때 <code class="language-plaintext highlighter-rouge">??</code>, <code class="language-plaintext highlighter-rouge">||</code> 연산자를 많이 사용하게 될텐데 변수에 의미를 주고 싶을 때에 따라 적절하게 같이 사용하면 될 것 같다.</p><p>또한 다른 논리 연산자들처럼 왼쪽식이 false이면 오른쪽 식은 검증하지 않는다.</p><h2 id="안전하게-객체-속성에-접근하기"><span class="mr-2">안전하게 객체 속성에 접근하기</span><a href="#안전하게-객체-속성에-접근하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>MDN 문서에서는 <code class="language-plaintext highlighter-rouge">?.</code> 연산자와 <code class="language-plaintext highlighter-rouge">??</code> 연산자를 같이 사용하여 안전하게 속성값에 접근할 것을 권장하고 있다. 여기서 안전하게라는 말은 nullish한 객체의 속성을 접근하고자 하는 시도일 것이다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span> <span class="na">first</span> <span class="p">:</span> <span class="p">{</span> <span class="na">prop</span><span class="p">:</span> <span class="mi">100</span><span class="p">}}</span>
<span class="nx">foo</span><span class="p">.</span><span class="nx">first</span><span class="p">?.</span><span class="nx">prop</span> <span class="p">??</span> <span class="dl">'</span><span class="s1">default value</span><span class="dl">'</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">?.</code> 연산자로 값을 연속해서 접근해나가다 최종 접근 속성값이 undefined 또는 null 이라면 ?? 연산자 뒤의 값을 할당하는 방식으로 가장 많이 조합되어 쓰일 것 같다.</p><h2 id="참고"><span class="mr-2">참고</span><a href="#참고" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>Nullish 하다는 것 = 값이 Null 또는 undefined<li>falsy 하다 = 논리식에서 false로 판단되는 값들<ul><li>false, 0, -0, ``, ‘’, “”, NaN, Null, undefined</ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing">MDN 문서 optioncal chaining</a><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining">MDN 문서 nullish coalescing operator</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/js/'>JS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/js/" class="post-tag no-text-decoration" >JS</a> <a href="/tags/javascript/" class="post-tag no-text-decoration" >Javascript</a> <a href="/tags/nullish/" class="post-tag no-text-decoration" >Nullish</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=JS에서 안전하게 널값 처리하기 Optional chaining(?.) &amp; Nullish coalescing operator (??) - 수람&amp;url=https://su-ram.github.io/posts/JS-optional-chaining-&amp;-nullish-coalescing-operator/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=JS에서 안전하게 널값 처리하기 Optional chaining(?.) &amp; Nullish coalescing operator (??) - 수람&amp;u=https://su-ram.github.io/posts/JS-optional-chaining-&amp;-nullish-coalescing-operator/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://su-ram.github.io/posts/JS-optional-chaining-&amp;-nullish-coalescing-operator/&amp;text=JS에서 안전하게 널값 처리하기 Optional chaining(?.) &amp; Nullish coalescing operator (??) - 수람" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Leetcode-2619-Array-Prototype-Last/">Leetcode | 2619. Array Prototype Last, 2620. Counter</a><li><a href="/posts/vue-useStore/">Vue | useStore()를 사용하는 이유</a><li><a href="/posts/JS-%EB%B3%80%EC%88%98-%EC%9C%A0%ED%9A%A8%EB%B2%94%EC%9C%84/">JS | scoping 유효범위</a><li><a href="/posts/JS-%ED%98%B8%EC%9D%B4%EC%8A%A4%ED%8C%85/">JS | 선언과 할당 관점에서 본 호이스팅 개념과 이유</a><li><a href="/posts/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8-%EC%8B%A4%ED%96%89%EA%B3%BC-%EB%A9%94%EB%AA%A8%EB%A6%AC-%ED%95%A0%EB%8B%B9/">왜 원시형 데이터는 스택에, 참조형 데이터는 힙에 저장할까?</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/js/">JS</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/graph/">graph</a> <a class="post-tag" href="/tags/problem-solving/">Problem Solving</a> <a class="post-tag" href="/tags/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">알고리즘</a> <a class="post-tag" href="/tags/const/">const</a> <a class="post-tag" href="/tags/let/">let</a> <a class="post-tag" href="/tags/ps/">ps</a> <a class="post-tag" href="/tags/var/">var</a> <a class="post-tag" href="/tags/%EB%B0%B1%EC%A4%80/">백준</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/JS-%ED%98%B8%EC%9D%B4%EC%8A%A4%ED%8C%85/"><div class="card-body"> <em class="timeago small" data-ts="1675868400" > 2023-02-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>JS | 선언과 할당 관점에서 본 호이스팅 개념과 이유</h3><div class="text-muted small"><p> 기존의 변수 선언 방식 모든 프로그래밍 언어에서의 변수는 선언 -&amp;gt; 할당 -&amp;gt; 사용의 과정을 거친다. 그리고 선언되어있지 않은 변수는 할당도, 사용도 불가능하다. 즉, 사전에 선언이 되어 있어야 사용이 가능하다. 자바스크립트에서는 이러한 과정에서 호이스팅이란 개념이 존재한다. 호이스팅 hoisting 호이스팅은 코드의 실행 전에, 변수...</p></div></div></a></div><div class="card"> <a href="/posts/JS-%EB%B3%80%EC%88%98-%EC%9C%A0%ED%9A%A8%EB%B2%94%EC%9C%84/"><div class="card-body"> <em class="timeago small" data-ts="1676214000" > 2023-02-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>JS | scoping 유효범위</h3><div class="text-muted small"><p> 유효 범위 scoping 기본적으로 var 키워드로 선언된 변수는 함수 레벨 스코프이다. 자바스크립트에서는 함수 레벨 스코프 (function scoping)와 블록 레벨 스코프 (block scoping)로 나뉜다. 함수 레벨 스코프 : 변수에 접근할 수 있는 범위가 변수가 선언된 함수로 한정된다. 블록 레벨 스코프 : 변수에 접근할 수...</p></div></div></a></div><div class="card"> <a href="/posts/TID/"><div class="card-body"> <em class="timeago small" data-ts="1662994800" > 2022-09-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>코어 자바스크립트 | 1. 데이터의 가변성과 불변성</h3><div class="text-muted small"><p> 0. 자바스크립트의 데이터 유형 JS의 데이터 유형은 2 가지가 있다. primitive (=원시형, 기본형) number, string, boolean, null, undefined reference (=참조형, 객체형) object, array, function … ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/TID/" class="btn btn-outline-primary" prompt="Older"><p>코어 자바스크립트 | 1. 데이터의 가변성과 불변성</p></a> <a href="/posts/ps-%EC%98%B9%EC%95%8C%EC%9D%B4-JS/" class="btn btn-outline-primary" prompt="Newer"><p>프로그래머스 | 옹알이 - Javascript 문제풀이</p></a></div><script src="https://utteranc.es/client.js" repo="su-ram/su-ram.github.io" issue-term="url | pathname | title |" crossorigin="anonymous" async> </script> <script type="text/javascript"> $(function() { const origin = "https://utteranc.es"; const iframe = "iframe.utterances-frame"; const lightTheme = "github-light"; const darkTheme = "github-dark"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } addEventListener("message", (event) => { let theme; /* credit to <https://github.com/utterance/utterances/issues/170#issuecomment-594036347> */ if (event.origin === origin) { /* page initial */ theme = initTheme; } else if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); } else { return; } const message = { type: "set-theme", theme: theme }; const utterances = document.querySelector(iframe).contentWindow; utterances.postMessage(message, origin); }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/su-ram">suram kim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/js/">JS</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/graph/">graph</a> <a class="post-tag" href="/tags/problem-solving/">Problem Solving</a> <a class="post-tag" href="/tags/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">알고리즘</a> <a class="post-tag" href="/tags/const/">const</a> <a class="post-tag" href="/tags/let/">let</a> <a class="post-tag" href="/tags/ps/">ps</a> <a class="post-tag" href="/tags/var/">var</a> <a class="post-tag" href="/tags/%EB%B0%B1%EC%A4%80/">백준</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
